(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,n){},101:function(t,e,n){},102:function(t){t.exports={}},103:function(t){t.exports={}},104:function(t,e,n){},105:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=n(20),c=n.n(i),l=(n(59),n(12)),s=n(22),r=Object(s.b)(function(t,e){switch(e.type){case"GET_DATE":return Object.assign({},t,{date:e.date});case"GET_TOPDATA":return Object.assign({},t,{topData:e.topData});case"GET_BEFOREDATA":return Object.assign({},t,{beforeData:e.beforeData});case"GET_TOP_STORIES_ID":return Object.assign({},t,{top_stories_id:e.top_stories_id});case"GET_STORIES_ID":return Object.assign({},t,{stories_id:e.stories_id});case"GET_PAGELIST":return Object.assign({},t,{pageList:e.pageList});case"GET_COMMENTLIST":return Object.assign({},t,{commentList:e.commentList});case"GET_TITLELIST":return t.titleList.push(e.titleList),Object.assign({},t,{titleList:t.titleList});default:return t}},{date:null,topData:[],beforeData:[],top_stories_id:[],stories_id:[],pageList:{},commentList:{},titleList:[]});r.subscribe(function(){console.log(r.getState())});var m=r,u=n(16),d=n(15),h=n(1),p=n(2),g=n(4),f=n(3),v=n(5),y=function(t,e,n,a,o){var i=null,c=t-e,l=t,s=null,r=0;i=t>e;!function t(){return 1e3===++r?(window.cancelAnimationFrame(s),i=null,c=null,l=null,s=null,r=null,void console.log("MAX")):l<=e&&i?(n.style.transform="translateX(".concat(e,"px) translateZ(0px)"),a&&a(),i=null,c=null,l=null,s=null,void(r=null)):(i&&(l-=.1*c,n.style.transform="translateX(".concat(l,"px) translateZ(0px)"),window.requestAnimationFrame(t)),l>=e&&!i?(n.style.transform="translateX(".concat(e,"px) translateZ(0px)"),a&&a(),i=null,c=null,l=null,s=null,void(r=null)):void(i||(l-=.1*c,n.style.transform="translateX(".concat(l,"px) translateZ(0px)"),window.requestAnimationFrame(t))))}()},E=function(t,e,n,a){var o=null,i=Math.abs(t-e),c=t,l=0;o=e>t,function t(){return++l>500?(o=null,i=null,c=null,l=null,void console.log("MAX")):o&&c>=e?(n.style.transform="translateY(".concat(e,"px) translateZ(0px)"),void a()):(o&&(c+=.1*i,n.style.transform="translateY(".concat(c,"px) translateZ(0px)")),!o&&c<=e?(n.style.transform="translateY(".concat(e,"px) translateZ(0px)"),void a()):(o||(c-=.1*i,n.style.transform="translateY(".concat(c,"px) translateZ(0px)")),void window.requestAnimationFrame(t)))}()},b=function(t,e,n,a){var o=e,i=t/a+1;o.style.transform="translateY(-".concat(t,"px) translateZ(0px)"),o.style.height=a+t+"px";for(var c=0;c<n.length;c++)n[c].style.transform="scale(".concat(i,")")},x=n(26),w=n(14),S=n.n(w),k=function(){var t=m.dispatch,e="https://www.easy-mock.com/mock/5d0bc7f4fbb61819f947c795/zhihu/proxy/before/"+m.getState().date;return S.a.get(e).then(function(e){var n=e.data.date,a=e.data,o=e.data.stories.map(function(t){return t.id});t({type:"GET_DATE",date:n}),t({type:"GET_BEFOREDATA",beforeData:m.getState().beforeData.concat(a)}),t({type:"GET_STORIES_ID",stories_id:m.getState().stories_id.concat(o)})})},N=n(38),O=n.n(N),L=function(){return o.a.createElement("div",{className:"btn",style:{width:"30px",height:"30px",margin:"5px 10px",position:"absolute"},onClick:function(){var t=document.getElementsByClassName("container")[0],e=Number(window.getComputedStyle(t,null).transform.split(",")[4]),n=document.getElementsByClassName("tab")[0].clientWidth;0===e?y(0,-n,t):e===-n&&y(-n,0,t)}},o.a.createElement("img",{src:O.a,style:{width:"100%",margin:"0px"},alt:"btn"}))},j=(n(36),function(t){return o.a.createElement("div",{className:"content-title title",style:{width:document.documentElement.clientWidth}},o.a.createElement(L,null),o.a.createElement("span",{style:{color:"white"}},"\u6bcf\u65e5\u65b0\u95fb"))}),T=function(t){return o.a.createElement(u.b,{to:t.to,onClick:function(){var e=t.outSide,n=Number(window.getComputedStyle(e).transform.split(",")[4]),a=-document.documentElement.clientWidth/2+n,o=t.inSide,i=-document.documentElement.clientWidth;y(n,a,e),y(0,i,o)}},t.children)},_=n(40),C=function(t){function e(){return Object(h.a)(this,e),Object(g.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.scroll=new _.a(this.refs.scroll,this.props.options),this.props.getScroll&&this.props.getScroll(this.scroll)}},{key:"componentDidUpdate",value:function(){this.scroll.refresh()}},{key:"render",value:function(){return o.a.createElement("div",{ref:"scroll",className:this.props.className,style:this.props.style},this.props.children)}}]),e}(o.a.Component),D=(n(91),function(t){var e=t.top_stories,n={width:document.documentElement.clientWidth,height:"200px"};return o.a.createElement("div",{style:n},o.a.createElement(C,{className:"content-banner",style:{width:"100%",height:"100%",overflow:"hidden"},options:{scrollX:!0,direction:"x",swiper:{loop:!0}}},o.a.createElement("ul",{className:"content-banner-list"},e?e.map(function(t,e){return o.a.createElement("li",{className:t.id,"data-type":e,style:{width:document.documentElement.clientWidth},key:e},o.a.createElement(T,{to:"/page?type=top_stories&&id=".concat(t.id),outSide:document.querySelector(".container"),inSide:document.querySelector(".page")},o.a.createElement("div",{className:"image",style:{}},o.a.createElement("img",{className:"banner-img",src:t.image,alt:t.ga_prefix,style:{margin:"0px"}})),o.a.createElement("div",{className:"text"},o.a.createElement("p",null,t.title))))}):null)))}),I=(n(92),function(t){var e=t.stories;return o.a.createElement("ul",{className:"content-list"},e?e.map(function(t){return o.a.createElement("li",{className:t.id,"data-type":t.id,key:t.id},o.a.createElement(T,{to:"/page?type=stories&&id=".concat(t.id),outSide:document.querySelector(".container"),inSide:document.querySelector(".page")},o.a.createElement("div",{className:"text"},o.a.createElement("span",null,t.title)),o.a.createElement("div",{className:"image"},o.a.createElement("img",{src:t.images,alt:t.ga_prefix,style:{margin:"0px"}}))))}):null)}),W=function(t){return o.a.createElement("div",{className:"content-top-list"},o.a.createElement(I,t))},P=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(g.a)(this,Object(f.a)(e).call(this,t))).state={top_stories:n.props.topData.top_stories,stories:n.props.topData.stories},n}return Object(v.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"contentTop"},o.a.createElement(D,{top_stories:this.state.top_stories}),o.a.createElement(W,{stories:this.state.stories}))}}]),e}(o.a.Component),q=function(t){for(var e=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],n=["\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d","\u661f\u671f\u65e5"],a=0;a<e.length;a++)if(e[a]===t)return n[a]},H=function(t){var e=t.slice(0,4),n=t.slice(4,6),a=t.slice(6,8),o=new Date(e,n,a).toString().slice(0,3);return n+"\u6708"+a+"\u65e5 "+q(o)},A=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(g.a)(this,Object(f.a)(e).call(this,t))).state={},n.titleList=[],n}return Object(v.a)(e,t),Object(p.a)(e,[{key:"getTitleList",value:function(){return[this.refs.beforeTitle.offsetTop,H(this.props.date)]}},{key:"componentDidMount",value:function(){this.props.onGetTitleList(this.getTitleList())}},{key:"render",value:function(){return o.a.createElement("div",{ref:"beforeTitle",className:"before-title title",style:{background:"rgb(2, 143, 214)"}},o.a.createElement("span",{style:{color:"white"}},H(this.props.date)))}}]),e}(o.a.Component),X=A=Object(l.b)(null,function(t){return{onGetTitleList:function(e){t({type:"GET_TITLELIST",titleList:e})}}})(A),G=function(t){return o.a.createElement("div",{className:"content-before-list"},o.a.createElement(I,t))},M=function(t){function e(){return Object(h.a)(this,e),Object(g.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"content-before"},this.props.beforeData.map(function(t,e){return o.a.createElement("div",{className:"content-before-".concat(e),key:e},o.a.createElement(X,{date:t.date}),o.a.createElement(G,{stories:t.stories}))}))}}]),e}(o.a.Component),B=n(41),Z=n.n(B),R=function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,display:"flex",justifyContent:"center",alignItems:"center"};return o.a.createElement("div",{className:"loading",style:t},o.a.createElement("img",{src:Z.a,style:{width:"50px",lineHeight:"50px"},alt:"loading"}))},F=function(t){function e(){var t;return Object(h.a)(this,e),(t=Object(g.a)(this,Object(f.a)(e).call(this))).scroll=null,t.titleEl=null,t.pEl=null,t.bannerEl=null,t.imgEl=null,t.bannerHeight=null,t.titleList=null,t.dataLoading=!1,t}return Object(v.a)(e,t),Object(p.a)(e,[{key:"getScroll",value:function(t){var e=this;this.scroll=t,this.titleEl=document.querySelector(".content-title"),this.spanEl=document.querySelector(".content-title span"),this.bannerEl=document.querySelector(".content-banner"),this.imgsEl=document.querySelectorAll(".content-banner-list .image"),this.bannerHeight=this.bannerEl.clientHeight,this.titleList=this.props.titleList,this.scroll.on("onScroll",function(t){e.onScrollDown(t),e.onScrollUp(t)}),this.scroll.on("onTouchMove",function(t){console.log(t)}),this.scroll.on("onTouchEnd",function(t){console.log(t)})}},{key:"onScrollUp",value:function(t){var e=this,n=this.scroll.$dom.content_h-this.scroll.$dom.el_h;if(t.y<=0&&function(t,e,n,a,o,i){var c=n,l=a,s=e,r=s.length,m=i,u=o;t>=0?c.style.backgroundColor="rgba(".concat(u,",0)"):t<=-m&&t>-m-50?c.style.backgroundColor="rgba(".concat(u,",1)"):t<=0&&t>=-m&&(c.style.backgroundColor="rgba(".concat(u,", ").concat(t/-m,")")),s.forEach(function(e,n,a){var o=null,i=Math.abs(t);1!==r&&(o=a[n-1]),o&&(i<a[0][0]?l.innerText="\u6bcf\u65e5\u65b0\u95fb":n===r-1&&i>o[0]&&i<e[0]?l.innerText=o[1]:i>o[0]&&i<e[0]&&(l.innerText=o[1]))})}(t.y,this.titleList,this.titleEl,this.spanEl,"2,143,214",this.bannerHeight),t.y<200-n){if(this.dataLoading)return;this.dataLoading=!0,k().then(k).then(function(){e.dataLoading=!1})}}},{key:"onScrollDown",value:function(t){t.y>0&&b(t.y,this.bannerEl,this.imgsEl,this.bannerHeight)}},{key:"componentDidMount",value:function(){!function(){var t=m.dispatch;S.a.get("https://www.easy-mock.com/mock/5d0bc7f4fbb61819f947c795/zhihu/proxy/latest").then(function(e){var n=e.data.date,a=e.data,o=a.top_stories,i=a.stories,c=[],l=[];o.forEach(function(t){return c.push(t.id)}),i.forEach(function(t){return l.push(t.id)}),t({type:"GET_DATE",date:n}),t({type:"GET_TOPDATA",topData:a}),t({type:"GET_TOP_STORIES_ID",top_stories_id:m.getState().top_stories_id.concat(c)}),t({type:"GET_STORIES_ID",stories_id:m.getState().stories_id.concat(l)})}).then(function(){k()})}()}},{key:"render",value:function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,overflow:"hidden"};return o.a.createElement("div",{className:"content",style:{margin:"0px"}},this.props.topData&&this.props.beforeData.length?o.a.createElement(o.a.Fragment,null,o.a.createElement(j,null),o.a.createElement(C,{className:"scroll",style:t,options:{scrollX:!1,scrollBar:!0,direction:"y",sideLock:[100,null]},getScroll:this.getScroll.bind(this)},o.a.createElement("div",null,o.a.createElement(P,{topData:this.props.topData}),o.a.createElement(M,{beforeData:this.props.beforeData})))):o.a.createElement(R,null))}}]),e}(o.a.Component),Y=F=Object(l.b)(function(t){return{date:t.date,topData:t.topData,beforeData:t.beforeData,titleList:t.titleList}})(F),z=n(42),U=n.n(z),$=function(){return o.a.createElement("div",{className:"tab-user",style:{width:"100%",height:"54px",display:"flex",margin:"20px 0px"}},o.a.createElement("div",{className:"image",style:{width:"35px",height:"35px",borderRadius:"50%",overflow:"hidden",margin:"auto 10px",background:"#5b5b5b"}},o.a.createElement("img",{src:U.a,alt:"\u7528\u6237\u5934\u50cf",style:{width:"100%"}})),o.a.createElement("div",{className:"text"},o.a.createElement("p",{style:{color:"#74797e"}},"\u8bf7\u767b\u5f55")))},J=n(43),K=n.n(J),Q=n(44),V=n.n(Q),tt=n(45),et=n.n(tt),nt=function(){var t=[["collect",K.a,"\u6536\u85cf"],["news",V.a,"\u6d88\u606f"],["option",et.a,"\u8bbe\u7f6e"]];return o.a.createElement("div",{className:"option",style:{width:"100%",marginTop:"10px",display:"flex"}},t.map(function(t,e){return o.a.createElement("div",{className:t[0],style:{width:"54px",height:"70px",textAlign:"center",marginRight:"10px"},key:e},o.a.createElement("div",{style:{width:"18px",height:"18px",margin:"10px auto"}},o.a.createElement("img",{src:t[1],alt:t[2],style:{width:"100%"}})),o.a.createElement("p",{style:{color:"#74797e",margin:"0px"}},t[2]))}))},at=n(46),ot=n.n(at),it=function(){var t=[["home",ot.a,"\u9996\u9875"]];return o.a.createElement("div",{className:"list"},t.map(function(t,e){return o.a.createElement("div",{className:t[0],key:e,style:{display:"flex",width:"100%",height:"56px",background:"#1b2329"}},o.a.createElement("div",{style:{width:"24px",height:"24px",margin:"auto 10px"}},o.a.createElement("img",{src:t[1],alt:t[2],style:{width:"100%"}})),o.a.createElement("p",{style:{color:"#fff"}},t[2]))}))},ct=function(t){function e(){return Object(h.a)(this,e),Object(g.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(p.a)(e,[{key:"render",value:function(){var t={width:.6*document.documentElement.clientWidth,height:document.documentElement.clientHeight,background:"#232a30"};return o.a.createElement("div",{className:"tab",style:t},o.a.createElement($,null),o.a.createElement(nt,null),o.a.createElement(it,null))}}]),e}(o.a.Component),lt=function(t){function e(){var t;return Object(h.a)(this,e),(t=Object(g.a)(this,Object(f.a)(e).call(this))).container=null,t.tabWidth=null,t}return Object(v.a)(e,t),Object(p.a)(e,[{key:"onTouchStart",value:function(t){var e=this,n=t.currentTarget,a=t.touches[0].clientX,o=Number(window.getComputedStyle(n).transform.split(",")[4]),i=o;n.ontouchmove=function(t){var c=t.touches[0].clientX;(i=o+(c-a))<-e.tabWidth?(i=-e.tabWidth,n.style.transform="translateX(".concat(-e.tabWidth,"px) translateZ(0px)")):i>0?(i=0,n.style.transform="translateX(".concat(0,"px) translateZ(0px)")):n.style.transform="translateX(".concat(i,"px) translateZ(0px)")},n.ontouchend=function(){var t=-e.tabWidth/2;i>t?y.call(e,i,0,n):i<t&&y.call(e,i,-e.tabWidth,n),n.ontouchmove=null,n.ontouchend=null}}},{key:"componentDidMount",value:function(){this.container=document.querySelector(".container"),this.tabWidth=document.querySelector(".tab").clientWidth,this.container.style.transform="translateX(-".concat(this.tabWidth,"px)")}},{key:"render",value:function(){return o.a.createElement("div",{className:"container",style:{display:"flex",float:"left"},onTouchStart:this.onTouchStart.bind(this)},o.a.createElement(ct,null),o.a.createElement(Y,null))}}]),e}(o.a.Component),st=n(47),rt=n.n(st),mt=(n(99),function(t){function e(){var t;return Object(h.a)(this,e),(t=Object(g.a)(this,Object(f.a)(e).call(this))).state={pageList:null},t.scroll=null,t.linkEl=null,t}return Object(v.a)(e,t),Object(p.a)(e,[{key:"createLink",value:function(){var t=this.state.pageList.css;this.link=document.createElement("link"),this.link.setAttribute("rel","stylesheet"),this.link.setAttribute("type","text/css"),this.link.setAttribute("href",t),document.querySelector("head").appendChild(this.link)}},{key:"removeLink",value:function(){this.link&&document.querySelector("head").removeChild(this.link)}},{key:"createImg",value:function(){for(var t=this,e=document.querySelectorAll(".content-wrap"),n=0;n<e.length;n++)e[n].style.overflow="visible";this.refs.content.querySelector(".img-place-holder").innerHTML="<div class='img-content'>\n                <img src=".concat(this.state.pageList.image," alt=").concat(this.state.pageList.ga_prefix,"/>\n            </div>");for(var a=document.querySelectorAll(".main-wrap img"),o=0;o<a.length;o++)a[o].onload=function(){t.scroll.refresh()}}},{key:"onScroll",value:function(){var t=this.refs.content.querySelector(".img-content"),e=t.querySelector("img");this.scroll.on("onScroll",function(n){n.y>0&&b(n.y,t,e,200)})}},{key:"componentDidMount",value:function(){var t=this;0!==this.props.indexId&&function(t,e){var n="https://www.easy-mock.com/mock/5d0bc7f4fbb61819f947c795/zhihu/proxy/news/"+t,a=m.getState().pageList,o=m.dispatch;if(!a[t])return S.a.get(n).then(function(n){o({type:"GET_PAAGELIST",pageList:Object.assign(a,Object(x.a)({},t,n))}),e(n)});e(a[t])}(this.props.indexId,function(e){var n=e.data;t.setState({pageList:n},function(){t.createLink(),t.createImg(),t.onScroll()})})}},{key:"componentWillReceiveProps",value:function(t){this.props.scroll!==t.scroll&&(this.scroll=t.scroll)}},{key:"componentWillUnmount",value:function(){this.removeLink()}},{key:"render",value:function(){return this.state.pageList?o.a.createElement("div",{className:"page-list-content",ref:"content",dangerouslySetInnerHTML:{__html:this.state.pageList.body}}):o.a.createElement(R,null)}}]),e}(o.a.Component)),ut=n(28),dt=n.n(ut),ht=n(48),pt=n.n(ht),gt=n(49),ft=n.n(gt),vt=n(50),yt=n.n(vt),Et=(n(100),function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(g.a)(this,Object(f.a)(e).call(this,t))).state={num:0},n}return Object(v.a)(e,t),Object(p.a)(e,[{key:"getCommentData",value:function(){var t=this,e=this.props.indexId;0!==e&&function(t,e){var n="https://www.easy-mock.com/mock/5d0bc7f4fbb61819f947c795/zhihu/proxy/long-comments/"+t,a="https://www.easy-mock.com/mock/5d0bc7f4fbb61819f947c795/zhihu/proxy/short-comments/"+t,o=m.getState().commentList,i=m.dispatch;if(!o[t])return S.a.all([S.a.get(n),S.a.get(a)]).then(S.a.spread(function(n,a){i({type:"GET_COMMENTLIST",commentList:Object.assign(o,Object(x.a)({},t,{longComment:n.data,shortComment:a.data}))}),e({longComment:n.data,shortComment:a.data})}));e(o[t])}(e,function(e){var n=e.longComment.comments.length+e.shortComment.comments.length;t.setState({num:n})})}},{key:"onClickLeft",value:function(t){t.stopPropagation();var e=this.props.history.goBack,n=document.querySelector(".container"),a=document.querySelector(".page"),o=Number(window.getComputedStyle(n).transform.split(",")[4]),i=Number(window.getComputedStyle(a).transform.split(",")[4]);new Promise(function(t){y(o,-225,n,t),y(i,0,a,t)}).then(function(){e()})}},{key:"onClickDown",value:function(t){t.stopPropagation(),this.props.nextId&&(this.props.onPageNextListData(this.props.nextId),console.log("123"))}},{key:"componentDidMount",value:function(){this.getCommentData()}},{key:"render",value:function(){return o.a.createElement("div",{className:"page-list-comment"},o.a.createElement("div",{className:"icon arrow-left"},o.a.createElement("div",{className:"page-list-comment-img"},o.a.createElement("img",{src:dt.a,alt:"arrow-left",onClick:this.onClickLeft.bind(this)}))),o.a.createElement("div",{className:"icon arraw-down"},o.a.createElement("div",{className:"page-list-comment-img"},o.a.createElement("img",{src:dt.a,alt:"arrow-down",onClick:this.onClickDown.bind(this)}))),o.a.createElement("div",{className:"icon like"},o.a.createElement("div",{className:"page-list-comment-img"},o.a.createElement("img",{src:pt.a,alt:"like"}))),o.a.createElement("div",{className:"icon share"},o.a.createElement("div",{className:"page-list-comment-img"},o.a.createElement("img",{src:ft.a,alt:"share"}))),o.a.createElement("div",{className:"icon message",style:{position:"relative"}},o.a.createElement(T,{to:"/page/comment/".concat(this.props.indexId),outSide:document.querySelector(".page"),inSide:document.querySelector(".comment")},o.a.createElement("div",{className:"page-list-comment-img"},o.a.createElement("img",{src:yt.a,alt:"message"})),o.a.createElement("div",{className:"page-list-comment-number"},o.a.createElement("span",null,this.state.num)))))}}]),e}(o.a.Component)),bt=Et=Object(d.d)(Et),xt=n(23),wt=n.n(xt),St=function(t){var e={width:"25px",height:"25px",transition:"transform 0.2s ease",transform:t.switch?"rotate(180deg)":"rotate(0deg)"};return o.a.createElement("div",{className:"page-list-top",style:{width:"100%",height:"45px",position:"absolute",top:"0px",marginTop:"-45px",display:"flex",justifyContent:"center"}},t.prevId?o.a.createElement("div",{className:"page-list-top-img",style:e},o.a.createElement("img",{src:wt.a,alt:"upData",style:{width:"100%"}})):null,o.a.createElement("div",{className:"page-list-top-text"},o.a.createElement("span",{style:{color:"#ccc"}},t.prevId?"\u4e0b\u62c9\u5237\u65b0\u4e0a\u4e00\u7bc7":"\u5df2\u7ecf\u662f\u7b2c\u4e00\u7bc7")))},kt=function(t){var e={width:"25px",height:"25px",transition:"transform 0.2s ease",transform:t.switch?"rotate(180deg)":"rotate(0deg)"};return o.a.createElement("div",{className:"page-list-bottom",style:{position:"absolute",width:"100%",height:"45px",marginBottom:"-45px",display:"flex",justifyContent:"center"}},t.nextId?o.a.createElement("div",{className:"page-list-top-img",style:e},o.a.createElement("img",{src:wt.a,alt:"upData",style:{width:"100%"}})):null,o.a.createElement("div",{className:"page-list-top-text"},o.a.createElement("span",{style:{color:"#ccc"}},t.nextId?"\u4e0a\u62c9\u5237\u65b0\u4e0b\u4e00\u7bc7":"\u5df2\u7ecf\u662f\u6700\u540e\u4e00\u7bc7")))},Nt=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(g.a)(this,Object(f.a)(e).call(this,t))).state={scroll:null,switch:!1},n}return Object(v.a)(e,t),Object(p.a)(e,[{key:"getScroll",value:function(t){var e=this;this.setState({scroll:t},function(){e.onScroll()})}},{key:"onPagePrevListData",value:function(){var t=this,e=document.querySelector(".page-content");new Promise(function(t){E(-document.documentElement.clientHeight,0,e,t)}).then(function(){t.props.onPrevListData(t.props.prevId),t.state.scroll.initSetPos()})}},{key:"onPageNextListData",value:function(t){var e=this,n=document.querySelector(".page-content");new Promise(function(t){E(-document.documentElement.clientHeight,2*-document.documentElement.clientHeight,n,t)}).then(function(){console.log("pageList"),e.props.onNextListData(t),e.state.scroll.initSetPos()})}},{key:"onScroll",value:function(){var t=this;this.state.scroll.on("onScroll",function(e){var n=t.state.scroll.$dom.content_h-t.state.scroll.$dom.el_h;e.y>50||e.y<-(n+70)?t.setState(function(t){if(!0!==t.switch)return{switch:!0}}):t.setState(function(t){if(!1!==t.switch)return{switch:!1}})}),this.state.scroll.on("onTouchEnd",function(e){var n=t.state.scroll.$dom.content_h-t.state.scroll.$dom.el_h;t.setState(function(t){if(!1!==t.switch)return{switch:!1}}),e.y>50&&t.props.prevId&&t.onPagePrevListData(),e.y<-(n+70)&&t.props.nextId&&t.onPageNextListData(t.props.nextId)})}},{key:"componentWillUnmount",value:function(){this.state.scroll.removeEvent()}},{key:"render",value:function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,position:"relative",overflow:"hidden"};return o.a.createElement(o.a.Fragment,null,o.a.createElement(C,{className:"page-list-scroll",style:t,options:{scrollBar:!0,direction:"Y",sideLock:[70,null]},getScroll:this.getScroll.bind(this)},o.a.createElement("div",{className:"page-list",ref:"pageList",style:{width:"100%",position:"relative",minHeight:"1000px"}},o.a.createElement(mt,{indexId:this.props.indexId,onPageScroll:this.onScroll.bind(this),scroll:this.state.scroll}),o.a.createElement("div",{style:{width:"100%",height:"40px"}}),o.a.createElement(St,{prevId:this.props.prevId,switch:this.state.switch}),o.a.createElement(kt,{nextId:this.props.nextId,switch:this.state.switch})),o.a.createElement(bt,{indexId:this.props.indexId,nextId:this.props.nextId,onPageNextListData:this.onPageNextListData.bind(this)})))}}]),e}(o.a.Component),Ot=(n(101),function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(g.a)(this,Object(f.a)(e).call(this,t))).state={pageList:[]},n.el=null,n.id=null,n.type=null,n.type_id=null,n.loading=!1,n}return Object(v.a)(e,t),Object(p.a)(e,[{key:"getUrl",value:function(){var t=rt.a.parse(this.props.location.search,!0);this.id=t.query.id,this.type=t.query.type,this.type_id=this.props["".concat(this.type,"_id")];this.props.history.listen}},{key:"getPageList",value:function(t){var e=this,n=this.type_id,a=Number(t),o=[];n.forEach(function(t,e,n){if(a===t){var i=n[e-2],c=n[e-1],l=n[e],s=n[e+1];[[i,c,l],[c,l,s],[l,s,n[e+2]]].forEach(function(t){var e={};e=t[1]?{prevId:t[0],indexId:t[1],nextId:t[2]}:{prevId:t[0],indexId:0,nextId:t[2]},o.push(e)})}}),this.setState({pageList:o},function(){console.log(e.state.pageList)})}},{key:"onTouchStart",value:function(t){var e=this,n=t.currentTarget,a=this.props.history.goBack,o=document.querySelector(".container"),i=document.querySelector(".page"),c=Number(window.getComputedStyle(o).transform.split(",")[4]),l=Number(window.getComputedStyle(i).transform.split(",")[4]),s=t.touches[0].clientX;n.ontouchmove=function(t){var e=t.touches[0].clientX-s,n=e/2;e<0||(o.style.transform="translateX(".concat(c+n,"px) translateZ(0px)"),i.style.transform="translateX(".concat(l+e,"px) translateZ(0px)"))},n.ontouchend=function(){e.touchEnd=!0;var t=document.documentElement.clientWidth,l=Number(window.getComputedStyle(o).transform.split(",")[4]),s=Number(window.getComputedStyle(i).transform.split(",")[4]);s<-t/2?(y(l,c,o),y(s,-t,i)):s>=-t/2&&new Promise(function(t){y(l,-225,o,t),y(s,0,i,t)}).then(function(){a()}),n.ontouchmove=null,n.ontouchend=null}}},{key:"onPrevListData",value:function(t){console.log("\u6267\u884c\u4e0b\u62c9\u64cd\u4f5c"),this.getPageList(t),this.el=this.refs.pageContent;var e=document.documentElement.clientHeight;this.el.style.transform="translateY(".concat(-e,"px) translateZ(0px)"),(0,this.props.history.replace)("/page?".concat(t))}},{key:"onNextListData",value:function(t){console.log("\u6267\u884c\u4e0a\u62c9\u64cd\u4f5c"),this.getPageList(t),this.el=this.refs.pageContent;var e=document.documentElement.clientHeight;this.el.style.transform="translateY(".concat(-e,"px) translateZ(0px)"),(0,this.props.history.replace)("/page?".concat(t))}},{key:"componentWillMount",value:function(){this.getUrl(),this.getPageList(this.id)}},{key:"render",value:function(){var t=this,e={width:document.documentElement.clientWidth,height:3*document.documentElement.clientHeight,transform:"translateY(-".concat(document.documentElement.clientHeight,"px)"),background:"white"};return o.a.createElement("div",{className:"page-content",ref:"pageContent",style:e,onTouchStart:this.onTouchStart.bind(this)},this.state.pageList.length?this.state.pageList.map(function(e){return o.a.createElement("div",{className:"page-content-list-".concat(e.indexId),key:e.indexId},o.a.createElement(Nt,{onPrevListData:t.onPrevListData.bind(t),onNextListData:t.onNextListData.bind(t),prevId:e.prevId,indexId:e.indexId,nextId:e.nextId}))}):null)}}]),e}(o.a.Component)),Lt=Ot=Object(l.b)(function(t){return{top_stories_id:t.top_stories_id,stories_id:t.stories_id}})(Ot),jt=function(t){var e={width:document.documentElement.clientWidth,height:"45px",background:"rgb(2, 143, 214)",textAlign:"center",lineHeight:"45px",color:"white"};return o.a.createElement("div",{className:"comment-title",style:e},"".concat(t.commentNum,"\u6761\u8bc4\u8bba"))},Tt=n(51),_t=n.n(Tt),Ct=function(t){return o.a.createElement("div",{className:"comment-list-content",style:{display:"flex",width:document.documentElement.clientWidth,borderBottom:"0.5px solid rgba(191,191,191,0.8)"}},o.a.createElement("div",{className:"avatar",style:{width:"20%"}},o.a.createElement("div",{style:{width:"35px",height:"35px",borderRadius:"50%",overflow:"hidden",margin:"15px auto"}},o.a.createElement("img",{src:t.comment.avatar,alt:"avatar",style:{width:"100%"}}))),o.a.createElement("div",{className:"content",style:{width:"80%"}},o.a.createElement("div",{className:"top",style:{height:"45px",display:"flex",justifyContent:"space-between",alignItems:"center"}},o.a.createElement("div",{className:"author",style:{fontWeight:"600"}},o.a.createElement("span",null,t.comment.author)),o.a.createElement("div",{className:"like",style:{marginRight:"15px"}},o.a.createElement("img",{src:_t.a,alt:"like",style:{width:"16px"}}),o.a.createElement("span",{style:{color:"#bfbfbf"}},t.comment.likes))),o.a.createElement("div",{className:"middle",style:{marginRight:"20px"}},o.a.createElement("span",{style:{fontSize:"15px"}},t.comment.content)),o.a.createElement("div",{className:"bottom",style:{width:"100%",height:"45px",lineHeight:"45px",fontSize:"14px"}},o.a.createElement("span",null,function(){var t={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},e=new Date(Date.now()-1560753647).toString().split(" "),n=e[1],a=e[2],o=e[4];for(var i in t)if(n===i)return"".concat(t[i],"-").concat(a," ").concat(o)}()))))},Dt=(n(102),function(t){var e=t.longComments.comments;return o.a.createElement("div",{className:"comment-list-long"},o.a.createElement("div",{style:{width:"100%",height:"45px",borderBottom:"0.5px solid rgba(191,191,191,0.5)",color:"black",lineHeight:"45px"}},o.a.createElement("span",{style:{marginLeft:"15px",fontWeight:"600"}},"".concat(e.length,"\u6761\u957f\u8bc4"))),o.a.createElement("div",{className:"long-comment-list"},e.map(function(t){return o.a.createElement(Ct,{comment:t,key:t.id})})))}),It=(n(103),function(t){var e=t.shortComments.comments;return o.a.createElement("div",{className:"comment-list-short"},o.a.createElement("div",{style:{width:"100%",height:"45px",borderBottom:"0.5px solid rgba(191,191,191,0.5)",color:"black",lineHeight:"45px"}},o.a.createElement("span",{style:{marginLeft:"15px",fontWeight:"600"}},"".concat(e.length,"\u6761\u77ed\u8bc4"))),o.a.createElement("div",{className:"short-comment-list"},e.map(function(t){return o.a.createElement(Ct,{comment:t,key:t.id})})))}),Wt=function(t){function e(){var t;return Object(h.a)(this,e),(t=Object(g.a)(this,Object(f.a)(e).call(this))).state={scroll:null},t}return Object(v.a)(e,t),Object(p.a)(e,[{key:"getScroll",value:function(t){this.setState({scroll:t})}},{key:"render",value:function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight-45,overflow:"hidden"},e={width:document.documentElement.clientWidth,minHeight:document.documentElement.clientHeight-45,position:"relative",paddingBottom:"40px",background:"white"};return o.a.createElement(C,{className:"comment-list-scroll",style:t,options:{scrollX:!1,direction:"Y",scrollBar:!0},getScroll:this.getScroll.bind(this)},o.a.createElement("div",{className:"comment-list",style:e},o.a.createElement(Dt,{longComments:this.props.commentList.longComment}),o.a.createElement(It,{shortComments:this.props.commentList.shortComment,scroll:this.state.scroll})))}}]),e}(o.a.Component),Pt=n(52),qt=n.n(Pt),Ht=n(53),At=n.n(Ht),Xt=function(t){console.log(t);var e={position:"fixed",bottom:"0px",width:document.documentElement.clientWidth,height:"40px",background:"#3d3d3d",display:"flex",justifyContent:"center",alignItems:"center"};return o.a.createElement("div",{className:"comment-bottom",style:e},o.a.createElement("div",{className:"comment-bot-arrow",style:{position:"absolute",left:"15px",transform:"rotate(90deg)"}},o.a.createElement("img",{src:qt.a,alt:"arrow",style:{width:"30px",height:"30px"},onClick:function(){var e=document.querySelector(".page"),n=Number(window.getComputedStyle(e).transform.split(",")[4]),a=document.querySelector(".comment"),o=Number(window.getComputedStyle(a).transform.split(",")[4]);new Promise(function(t){y(n,-document.documentElement.clientWidth,e,t),y(o,0,a,t)}).then(function(){t.history.goBack()})}.bind(void 0)})),o.a.createElement("div",{className:"text"},o.a.createElement("img",{src:At.a,alt:"comment",style:{width:"15px",height:"15px",marginRight:"5px"}}),o.a.createElement("span",{style:{color:"white",fontSize:"14px"}},"\u5199\u8bc4\u8bba")))},Gt=Xt=Object(d.d)(Xt),Mt=function(t){function e(t){var n;return Object(h.a)(this,e),(n=Object(g.a)(this,Object(f.a)(e).call(this,t))).indexId=n.props.match.params.id,n.commentList=n.props.commentList[n.indexId],n.commentNum=n.commentList.longComment.comments.length+n.commentList.shortComment.comments.length,n}return Object(v.a)(e,t),Object(p.a)(e,[{key:"onTouchStart",value:function(t){console.log("comment");var e=this,n=document.querySelector(".comment"),a=document.querySelector(".page"),o=Number(window.getComputedStyle(n).transform.split(",")[4]),i=Number(window.getComputedStyle(a).transform.split(",")[4]),c=t.currentTarget,l=t.touches[0].clientX,s=null,r=null;c.ontouchmove=function(t){var e=t.touches[0].clientX-l;s=i+e/2,(r=o+e)<=o?(s=i,r=o,a.style.transform="translateX(".concat(s,"px)"),n.style.transform="translateX(".concat(o,"}px)")):r>=0?(s=i+document.documentElement.clientWidth/2,a.style.transform="translateX(".concat(s,"px)"),n.style.transform="translateX(".concat(0,"px)")):(a.style.transform="translateX(".concat(s,"px)"),n.style.transform="translateX(".concat(r,"px)"))},c.ontouchend=function(){s&&r&&(r<-document.documentElement.clientWidth/2?(y(s,i,a),y(r,o,n)):(console.log(s),new Promise(function(t){y(s,-document.documentElement.clientWidth,a,t),y(r,0,n,t)}).then(function(){e.props.history.goBack()})),c.ontouchmove=null,c.ontouchend=null)}}},{key:"render",value:function(){var t={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,background:"white"};return o.a.createElement("div",{style:t,onTouchStart:this.onTouchStart.bind(this)},o.a.createElement(jt,{commentNum:this.commentNum}),o.a.createElement(Wt,{commentList:this.commentList}),o.a.createElement(Gt,null))}}]),e}(o.a.Component),Bt=Mt=Object(l.b)(function(t){return{commentList:t.commentList}})(Mt);n(104);var Zt=function(){var t={position:"relative",width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,overflow:"hidden"},e={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,overflow:"hidden"},n={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,position:"relative",top:"-".concat(document.documentElement.clientHeight,"px"),left:document.documentElement.clientWidth},a={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,position:"absolute",top:"0px",left:document.documentElement.clientWidth};return o.a.createElement(l.a,{store:m},o.a.createElement(u.a,null,o.a.createElement("div",{className:"App",style:t},o.a.createElement("div",{className:"index",style:e},o.a.createElement(lt,null)),o.a.createElement("div",{className:"page",style:n},o.a.createElement(d.a,{path:"/page",component:Lt})),o.a.createElement("div",{className:"comment",style:a},o.a.createElement(d.a,{path:"/page/comment/:id",component:Bt})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(Zt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},23:function(t,e,n){t.exports=n.p+"static/media/up.66aaad91.svg"},28:function(t,e,n){t.exports=n.p+"static/media/arrow.96333e81.svg"},36:function(t,e,n){},38:function(t,e,n){t.exports=n.p+"static/media/btn.d96e3e98.svg"},41:function(t,e,n){t.exports=n.p+"static/media/Rolling-1s-200px.b800e9ba.svg"},42:function(t,e,n){t.exports=n.p+"static/media/timg.26f19a46.jpg"},43:function(t,e,n){t.exports=n.p+"static/media/\u6536\u85cf.4fceb174.svg"},44:function(t,e,n){t.exports=n.p+"static/media/\u6d88\u606f.0665e09d.svg"},45:function(t,e,n){t.exports=n.p+"static/media/\u8bbe\u7f6e.15c9ac90.svg"},46:function(t,e,n){t.exports=n.p+"static/media/\u9996\u9875.e7faafd7.svg"},48:function(t,e,n){t.exports=n.p+"static/media/like.fff51b3b.svg"},49:function(t,e,n){t.exports=n.p+"static/media/share.9dff36e7.svg"},50:function(t,e,n){t.exports=n.p+"static/media/message.f6fcbd5e.svg"},51:function(t,e,n){t.exports=n.p+"static/media/like.85872c1f.svg"},52:function(t,e,n){t.exports=n.p+"static/media/arrow.96333e81.svg"},53:function(t,e,n){t.exports=n.p+"static/media/comment.b5b586fe.svg"},54:function(t,e,n){t.exports=n(105)},59:function(t,e,n){},91:function(t,e,n){},92:function(t,e,n){},99:function(t,e,n){}},[[54,1,2]]]);
//# sourceMappingURL=main.de7ba634.chunk.js.map